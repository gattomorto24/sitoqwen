<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
/* --- STILI AZIONE (ACTION SHEET) --- */
.popup-action-sheet {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 12000;
    background: #fff;
    border-radius: 24px 24px 0 0; /* Arrotondamento pi√π marcato stile Material */
    box-shadow: 0 -8px 32px rgba(0,0,0,0.15);
    max-width: 500px;
    margin: 0 auto;
    padding: 16px 0 8px 0;
    display: none;
    flex-direction: column;
    align-items: stretch;
    font-family: 'Roboto', -apple-system, sans-serif;
}

.popup-action-sheet-title {
    color: #5f6368;
    font-size: 14px;
    text-align: center;
    margin-bottom: 16px;
    font-weight: 500;
    letter-spacing: 0.25px;
    text-transform: uppercase;
}

.popup-action-sheet-btn {
    background: #fff;
    border: none;
    border-bottom: 1px solid #f1f3f4;
    font-size: 18px;
    color: #3c4043;
    padding: 20px 24px;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: 16px;
    outline: none;
    text-decoration: none;
}

.popup-action-sheet-btn:last-of-type {
    border-bottom: none;
}

.popup-action-sheet-btn:hover, .popup-action-sheet-btn:focus {
    background: #f8f9fa;
    color: #1a73e8;
}

.popup-action-sheet-btn .material-icons {
    font-size: 24px;
    color: #5f6368;
}

.popup-action-sheet-btn:hover .material-icons {
    color: #1a73e8;
}

.popup-action-sheet-cancel {
    background: #fff;
    color: #d93025;
    font-size: 16px;
    font-weight: 600;
    margin-top: 8px;
    padding: 18px 0;
    border: none;
    border-top: 4px solid #f1f3f4;
    cursor: pointer;
    transition: background 0.2s;
}

.popup-action-sheet-cancel:hover {
    background: #fce8e6;
}

/* --- IL PULSANTE FLOAT CON LA ROTELLA --- */
.popup-float-minimal {
    position: fixed;
    right: 24px;
    bottom: 24px;
    width: 56px; /* Misura standard FAB Material Design */
    height: 56px;
    border-radius: 16px; /* Design moderno Material 3 (squircle-ish) */
    background: #1a73e8; /* Blu Google */
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(26, 115, 232, 0.4);
    z-index: 12001;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    padding: 0;
    outline: none;
}

.popup-float-minimal:hover {
    box-shadow: 0 8px 24px rgba(26, 115, 232, 0.5);
    transform: scale(1.05) rotate(30deg); /* La rotella ruota leggermente all'hover */
    background: #1765cc;
}

.popup-float-minimal .material-icons {
    font-size: 28px;
    color: #ffffff;
}

/* Overlay di sfondo per scurire la pagina quando aperto */
.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 11999;
    display: none;
}
</style>

<button class="popup-float-minimal" id="popupTrigger" title="Apri opzioni" aria-label="Apri menu" type="button">
    <span class="material-icons">settings</span>
</button>

<div class="popup-overlay" id="popupOverlay"></div>

<div class="popup-action-sheet" id="popupActionSheet">
    <div class="popup-action-sheet-title">Opzioni di contatto</div>
    
    <a class="popup-action-sheet-btn" href="https://wa.me/393497500613" target="_blank" rel="noopener">
        <span class="material-icons">chat</span> 
        <span>WhatsApp</span>
    </a>
    
    <a class="popup-action-sheet-btn" href="tel:+393497500613">
        <span class="material-icons">call</span> 
        <span>Chiama ora</span>
    </a>
    
    <a class="popup-action-sheet-btn" href="https://sgomberocatania.it" target="_blank" rel="noopener">
        <span class="material-icons">public</span> 
        <span>Sito Web Ufficiale</span>
    </a>

    <button class="popup-action-sheet-cancel" id="popupActionCancel" type="button">CHIUDI</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const trigger = document.getElementById('popupTrigger');
    const sheet = document.getElementById('popupActionSheet');
    const cancel = document.getElementById('popupActionCancel');
    const overlay = document.getElementById('popupOverlay');

    function openMenu() {
        sheet.style.display = 'flex';
        overlay.style.display = 'block';
        document.body.style.overflow = 'hidden'; // Impedisce lo scroll sotto
    }

    function closeMenu() {
        sheet.style.display = 'none';
        overlay.style.display = 'none';
        document.body.style.overflow = '';
    }

    trigger.addEventListener('click', function(e){
        e.stopPropagation();
        openMenu();
    });

    cancel.addEventListener('click', closeMenu);
    overlay.addEventListener('click', closeMenu);

    // Gestione tasto ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === "Escape") closeMenu();
    });
});
</script>
